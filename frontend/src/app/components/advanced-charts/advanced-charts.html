<div class="p-4 sm:p-6 md:p-8">
  @if (summary(); as data) {
  <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
      <!-- Title -->
      <div>
        <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider">Spending by Category</h2>
        <p class="text-2xl font-bold text-gray-800 mt-1">All time</p>
      </div>

      <!-- Filters -->
      <div class="flex items-center gap-2 mt-4 md:mt-0">
        <p-select [options]="chartTypes" [(ngModel)]="chartType" styleClass="w-full md:w-auto"></p-select>
        <p-select [options]="groupByOptions" [(ngModel)]="groupBy" styleClass="w-full md:w-auto"></p-select>
        <p-button label="Totals" styleClass="p-button-outlined p-button-secondary"></p-button>
        <p-button label="Change" styleClass="p-button-outlined p-button-secondary"></p-button>
        <p-button icon="pi pi-chart-bar" styleClass="p-button-outlined p-button-secondary"></p-button>
        <p-button icon="pi pi-chart-line" styleClass="p-button-outlined p-button-secondary"></p-button>
        <p-button icon="pi pi-upload" styleClass="p-button-outlined p-button-secondary"></p-button>
      </div>
    </div>

    <!-- Chart -->
    @if (data.expenses_by_category.length > 0) {
    <div class="w-full h-[400px] md:h-[500px]">
      <p-chart [type]="chartType()" [data]="chartData" [options]="chartOptions" class="w-full h-full"></p-chart>
    </div>
    } @else {
    <div class="text-gray-400 italic text-center py-20">
      Sem despesas registradas para os filtros selecionados.
    </div>
    }
  </div>
  } @else {
  <div class="flex justify-center items-center h-96">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
  </div>
  }
</div>
