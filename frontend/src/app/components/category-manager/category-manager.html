<div class="mb-8">
     <p-confirmDialog></p-confirmDialog>

     <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-bold text-gray-800">Categorias</h2>
          <p-button label="Nova Categoria" icon="pi pi-plus" size="small" (onClick)="openNew()"></p-button>
     </div>

     <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">

          <div *ngFor="let c of categories()"
               class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all group relative flex flex-col items-center text-center gap-3">

               <div class="absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10">
                    <button (click)="editCategory(c)"
                         class="w-6 h-6 rounded-full bg-white shadow-sm text-blue-600 flex items-center justify-center">
                         <i class="pi pi-pencil text-xs"></i>
                    </button>
                    <button (click)="deleteCategory($event, c.id!)"
                         class="w-6 h-6 rounded-full bg-white shadow-sm text-red-600 flex items-center justify-center">
                         <i class="pi pi-trash text-xs"></i>
                    </button>
               </div>

               <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl mb-1"
                    [style.backgroundColor]="c.color + '20'" [style.color]="c.color">
                    <i [class]="c.icon"></i>
               </div>

               <div class="font-bold text-gray-700 text-sm truncate w-full px-2">
                    {{ c.name }}
               </div>
          </div>

          <div (click)="openNew()"
               class="border-2 border-dashed border-gray-300 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-all text-gray-400 hover:text-blue-500 min-h-[120px]">
               <i class="pi pi-plus text-xl mb-2"></i>
               <span class="text-sm font-medium">Nova</span>
          </div>

     </div>
</div>

<p-dialog [header]="editingId() ? 'Editar Categoria' : 'Nova Categoria'" [modal]="true" [(visible)]="visible"
     [style]="{ width: '25rem' }">
     <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-4 pt-4">
          <div class="flex flex-col gap-2">
               <label class="font-semibold">Nome</label>
               <input pInputText formControlName="name" class="w-full" />
          </div>
          <div class="flex gap-4">
               <div class="flex-1 flex flex-col gap-2">
                    <label class="font-semibold">√çcone (ex: pi pi-tag)</label>
                    <input pInputText formControlName="icon" class="w-full" />
               </div>
               <div class="flex flex-col gap-2 items-center">
                    <label class="font-semibold">Cor</label>
                    <p-colorPicker formControlName="color"></p-colorPicker>
               </div>
          </div>
          <div class="flex justify-end mt-4">
               <p-button label="Salvar" type="submit" [disabled]="form.invalid"></p-button>
          </div>
     </form>
</p-dialog>