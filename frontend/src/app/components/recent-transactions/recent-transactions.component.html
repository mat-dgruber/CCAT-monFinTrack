<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
  <h3 class="text-lg font-bold text-gray-800 mb-4">Transações Recentes</h3>

  <div class="flex flex-col gap-6">
    @for (group of groupedTransactions(); track group.date) {
    <div>
      <div
        class="text-sm font-medium text-gray-500 mb-3 uppercase tracking-wider pl-2 border-l-4 border-blue-100"
      >
        {{ group.date }}
      </div>

      <div class="flex flex-col gap-2">
        @for (t of group.transactions; track t.id) {
        <div
          class="group flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer border border-transparent hover:border-gray-200"
          (click)="editTransaction($event, t)"
        >
          <!-- Left: Icon + Info -->
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 rounded-full flex items-center justify-center bg-opacity-10"
              [style.backgroundColor]="t.category.color + '20'"
            >
              <i [class]="t.category.icon" [style.color]="t.category.color"></i>
            </div>

            <div class="flex flex-col">
              <span class="font-medium text-gray-800">{{ t.description }}</span>
              <span class="text-xs text-gray-500"
                >{{ t.category.name }} •
                {{ t.payment_method | paymentFormat }}</span
              >
            </div>
          </div>

          <!-- Right: Amount + Arrow -->
          <div class="flex items-center gap-4">
            <span
              class="font-bold"
              [class.text-red-500]="t.type === 'expense'"
              [class.text-green-500]="t.type === 'income'"
            >
              {{ t.type === "expense" ? "-" : "+" }}
              {{ t.amount | currency : "BRL" }}
            </span>

            <i
              class="pi pi-chevron-right text-gray-300 group-hover:text-gray-500 transition-colors"
            ></i>
          </div>
        </div>
        }
      </div>
    </div>
    } @empty {
    <div class="text-center text-gray-400 py-8 italic">
      Nenhuma transação recente.
    </div>
    }
  </div>

  <app-transaction-form
    (save)="loadRecentTransactions()"
  ></app-transaction-form>
</div>
