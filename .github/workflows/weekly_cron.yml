name: Weekly Report Job

on:
  schedule:
    # Rodar toda segunda-feira Ã s 09:00 UTC (06:00 BRT)
    - cron: "0 9 * * 1"
  workflow_dispatch: # Permite rodar manualmente pelo GitHub

jobs:
  trigger-report:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Weekly Report API
        run: |
          curl -X POST "${{ secrets.API_URL }}/api/jobs/weekly-report" \
          -H "x-cron-secret: ${{ secrets.CRON_SECRET }}" \
          -H "Content-Type: application/json"
